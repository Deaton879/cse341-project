<!DOCTYPE html>
<html>
<head>
   <title>JSON Results</title>
   <% include ../../includes/header.ejs %>
   <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
	<link href="/stylesheets/results.css" rel="stylesheet" type="text/css" />
</head>
<body>
   <% include ../../includes/nav.ejs %>
   <div class="container">
      
      <h1>JSON Results</h1><hr>

      <!-- Pagination button generation -->
      <form class="actions container pagination">
         <% if(page > 1) { %>
            <a href="?page=1<%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==1) ? 'btn-primary' : 'btn-default' %>">First</a>
         <% } %>
      
         <% if(hasPreviousPage) { %>
            <a href="?page=<%= previousPage %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==previousPage) ? 'btn-primary' : 'btn-default' %>"> Prev</a>
         <% } %>

         <a href="?page=<%= page %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==page) ? 'btn-primary' : 'btn-default' %>"><%= page %></a>
         
         <!-- <% if(hasNextPage) { %>
            
         <% } %> -->

         <% if(page < numPages) { %>
            <a href="?page=<%= nextPage %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==nextPage) ? 'btn-primary' : 'btn-default' %>">Next</a>
            <a href="?page=<%= numPages %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==numPages) ? 'btn-primary' : 'btn-default' %>">Last</a>
         <% } %>
      </form><hr>
      <% for(var i=0; i<data.length; i++) {%>
         <% if(i % 3 == 0) { %> 
            <div class="card-deck">
         <% } %>
               <div class="card cCard">
                  <img src="<%= data[i].imageUrl %>" class="card-img-top cImage">
                  <div class="card-body">
                     <h5 class="card-title"><%= data[i].name %></h5>
                     <h6><%= data[i].price %></h6>
                     <p class="card-text cText"><%= data[i].description %></p>
                  </div>
               </div>
         <% if(i % 3 == 2) { %> 
            </div>
            <br>
         <% } %>   
      <% } %>
   </div><hr>

   <!-- Pagination button generation -->
   <form class="actions container pagination">
      <% if(page > 1) { %>
         <a href="?page=1<%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==1) ? 'btn-primary' : 'btn-default' %>">First</a>
      <% } %>
   
      <% if(hasPreviousPage) { %>
         <a href="?page=<%= previousPage %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==previousPage) ? 'btn-primary' : 'btn-default' %>"> Prev</a>
      <% } %>

      <a href="?page=<%= page %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==page) ? 'btn-primary' : 'btn-default' %>"><%= page %></a>
      
      <!-- <% if(hasNextPage) { %>
         
      <% } %> -->

      <% if(page < numPages) { %>
         <a href="?page=<%= nextPage %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==nextPage) ? 'btn-primary' : 'btn-default' %>">Next</a>
         <a href="?page=<%= numPages %><%= (searchedValue) ? `&searchValue=${searchedValue}` :  "" %>" class="btn <%= (page==numPages) ? 'btn-primary' : 'btn-default' %>">Last</a>
      <% } %>
   </form>
   <hr>
</body>
</html>